{% extends "base.html" %}

{% block title %}Reporte_fono{% endblock %}
{% block subtitle %}Reportes Audios Fonoaudiólogos {{ nombre_usuario }} {% endblock %}

{% block fecha %}
<div class="info">
    <span class="date">
      <span class="month">{{ fecha_actual|date:"F" }} </span>
      <span class="day">{{ fecha_actual|date:"d" }}</span>
      <span class="year">{{ fecha_actual|date:"Y" }}</span>
    </span>
  </div>
{% endblock %}

{% block content %}
<div class="chart-container" style="width: 50%; margin: 0 auto;">
    <h2 style="font-size: 20px; text-align: center; margin-bottom: 20px;">Gráfico de Género de Usuarios</h2> <!-- Título del gráfico con letras más pequeñas, centrado horizontalmente y separado del gráfico -->
    <canvas id="generoChart" width="500" height="500"></canvas> <!-- Ajusta el ancho y alto aquí -->
</div>

<div class="chart-container" style="width: 50%; margin: 0 auto;margin-top: 80px;">
    <h2 style="font-size: 20px; text-align: center; margin-bottom: 20px;">Gráfico de Año de Nacimiento</h2> <!-- Título del gráfico con letras más pequeñas, centrado horizontalmente y separado del gráfico -->
    <canvas id="anoNacimientoChart" width="500" height="300"></canvas> <!-- Ajusta el ancho y alto aquí -->
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Gráfico de género de usuarios
    var ctxGenero = document.getElementById('generoChart').getContext('2d');
    var generoData = {{ genero_data|safe }};
    var generoLabels = Object.keys(generoData);
    var generoDataArray = Object.values(generoData);

    var generoChart = new Chart(ctxGenero, {
        type: 'pie',
        data: {
            labels: generoLabels,
            datasets: [{
                label: 'Género de Usuarios',
                data: generoDataArray,
                backgroundColor: [
                    'rgba(255, 99, 132, 0.5)',
                    'rgba(54, 162, 235, 0.5)',
                    'rgba(255, 206, 86, 0.5)',
                    'rgba(75, 192, 192, 0.5)',
                    'rgba(153, 102, 255, 0.5)',
                    'rgba(255, 159, 64, 0.5)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            responsive: false, // Desactiva la capacidad de respuesta
            maintainAspectRatio: true // Mantiene el aspecto
        }
    });

    // Gráfico de año de nacimiento

    
    var ctxAnoNacimiento = document.getElementById('anoNacimientoChart').getContext('2d');
    var anoNacimientoData = {{ ano_nacimiento_data|safe }};
    var anoNacimientoLabels = anoNacimientoData.labels;
    var anoNacimientoDataArray = anoNacimientoData.data;

    var anoNacimientoChart = new Chart(ctxAnoNacimiento, {
        type: 'bar',
        data: {
            labels: anoNacimientoLabels,
            datasets: [{
                label: 'Año de Nacimiento',
                data: anoNacimientoDataArray,
                fill: false, // No rellenar el área bajo la línea
                borderColor: 'rgba(75, 192, 192, 1)', // Color de la línea
                backgroundColor: 'rgba(75, 192, 192, 0.2)', // Color del área debajo de la línea
                pointBackgroundColor: 'rgba(75, 192, 192, 1)', // Color de los marcadores
                pointRadius: 5, // Tamaño de los marcadores
                borderWidth: 2 // Ancho de la línea
            }]
        },
        options: {
            responsive: false, // Desactiva la capacidad de respuesta
            maintainAspectRatio: true // Mantiene el aspecto
        }
    });
</script>
{% endblock %}